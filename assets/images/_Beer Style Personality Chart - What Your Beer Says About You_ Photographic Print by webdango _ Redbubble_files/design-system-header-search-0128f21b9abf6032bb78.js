(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1765:function(e,t,n){e.exports={context:"styles__context--31pcD",contextName:"styles__contextName--18wkl",clearIconWrapper:"styles__clearIconWrapper--2wOdA",invert:"styles__invert--17T43"}},1766:function(e,t,n){e.exports={form:"styles__form--3oFPl",contextWrapper:"styles__contextWrapper--2TNer",clearIconWrapper:"styles__clearIconWrapper--1Ug_p",termWrapper:"styles__termWrapper--3JUoy",term:"styles__term--22f3c",clear:"styles__clear--3iAKw",search:"styles__search--33k1q",focused:"styles__focused--2k94M",dirty:"styles__dirty--bwbWZ",hasProductContext:"styles__hasProductContext--3PRvR"}},1767:function(e,t,n){e.exports={searchBox:"styles__searchBox--2bNGs",inputWrapper:"styles__inputWrapper--1vNgu"}},1947:function(e,t,n){"use strict";n.r(t);var o,r,a,c,i,l,s=n(1),u=n.n(s),d=n(0),h=n.n(d),p=n(5),f=n(9),m=n.n(f),y=n(33),b=n.n(y),v=n(857),C=n.n(v),g=n(887),S=n(816),x=n(118),O=n(3),w=n(930),k=n(1766),_=n.n(k);function P(e){return(P="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t,n,o){l||(l="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});if(1===a)t.children=o;else if(a>1){for(var i=new Array(a),s=0;s<a;s++)i[s]=arguments[s+3];t.children=i}return{$$typeof:l,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function F(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=Object(p.e)({clearSearchProductContextAccessibleLabel:(o={id:"node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.clearSearchProductContextAccessibleLabel"},B(o,"id","node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.clearSearchProductContextAccessibleLabel"),B(o,"defaultMessage","Clear search product"),o),searchTermPlaceholder:(r={id:"node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchTermPlaceholder"},B(r,"id","node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchTermPlaceholder"),B(r,"defaultMessage","Find your thing"),r),searchTermLabel:(a={id:"node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchTermLabel"},B(a,"id","node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchTermLabel"),B(a,"defaultMessage","Search term"),a),clearSearchTermLabel:(c={id:"node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.clearSearchTermLabel"},B(c,"id","node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.clearSearchTermLabel"),B(c,"defaultMessage","Clear search term"),c),searchLabel:(i={id:"node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchLabel"},B(i,"id","node_modules.@redbubble.design-system.react.headerAndFooter.components.SearchBox.Box.Input.searchLabel"),B(i,"defaultMessage","Search"),i)}),R=T(x.a,{size:O.v}),N=T(S.a,{size:O.v}),U=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=j(t).call(this,e))||"object"!==P(r)&&"function"!==typeof r?I(o):r).state={focused:!1,dirty:!!e.term,term:e.term,productContext:e.productContext,prevTerm:e.term,prevProductContext:e.productContext},n.handleFocus=n.handleFocus.bind(I(n)),n.handleBlur=n.handleBlur.bind(I(n)),n.handleChange=n.handleChange.bind(I(n)),n.handleKeyDown=n.handleKeyDown.bind(I(n)),n.handleContextClick=n.handleContextClick.bind(I(n)),n.handleContextKeyUp=n.handleContextKeyUp.bind(I(n)),n.handleContextKeyDown=n.handleContextKeyDown.bind(I(n)),n.handleClearClick=n.handleClearClick.bind(I(n)),n.handleSearchClick=n.handleSearchClick.bind(I(n)),n.handleSubmit=n.handleSubmit.bind(I(n)),n.contextRef=Object(s.createRef)(),n.termRef=Object(s.createRef)(),n.clearRef=Object(s.createRef)(),n.searchRef=Object(s.createRef)(),n.contextFocused=!1,n.contextKeyDown=!1,n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(t,s["Component"]),n=t,r=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.term!==t.prevTerm,o=b()(e,"productContext.id",null)!==b()(t,"prevProductContext.id",null),r={},a={},c=null;return n&&(r={term:e.term,prevTerm:e.term}),o&&(a={productContext:e.productContext,prevProductContext:e.productContext}),(o||n)&&(c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){B(e,t,n[t])})}return e}({},t,r,a)),c}},{key:"hasProductContext",value:function(e){return e&&e.id&&e.label}}],(o=[{key:"handleFocus",value:function(){var e=this;this.setState({focused:!0},function(){e.props.onFocus()})}},{key:"handleBlur",value:function(){var e=this;this.setState({focused:!1},function(){e.props.onBlur()})}},{key:"handleChange",value:function(e){var t=this,n=e.target.value;this.setState({term:n,dirty:!!n},function(){t.props.onChange(n)})}},{key:"handleKeyDown",value:function(e){var n=this.state,o=n.term,r=n.productContext;!o&&8===e.keyCode&&t.hasProductContext(r)&&(this.contextRef.current.focus(),this.contextFocused=!0,this.contextKeyDown=!0),this.props.onKeyDown(e)}},{key:"handleContextKeyUp",value:function(){this.contextKeyDown=!1}},{key:"handleContextKeyDown",value:function(e){!this.contextKeyDown&&this.contextFocused&&8===e.keyCode?(this.handleContextClick(),this.contextFocused=!1):this.contextFocused&&39===e.keyCode&&(this.termRef.current.focus(),this.contextFocused=!1)}},{key:"handleContextClick",value:function(){var e=this;this.props.onClearProductContext(),this.setState({productContext:null},function(){e.state.term&&e.handleSubmit(),e.termRef.current.focus()})}},{key:"handleClearClick",value:function(){var e=this;this.setState({term:""},function(){e.props.onChange(""),t.hasProductContext(e.state.productContext)&&e.handleSubmit()}),this.clearRef.current.blur(),this.termRef.current.focus()}},{key:"handleSearchClick",value:function(){this.searchRef.current.blur()}},{key:"handleSubmit",value:function(e){var t=this.props.onSearch,n=this.state,o=n.term,r=n.productContext;e&&e.preventDefault(),this.termRef.current.blur(),t({term:o,productContext:r})}},{key:"componentDidUpdate",value:function(e){var t=e.focus,n=this.props.focus;t!==n&&(n?this.termRef.current.focus():this.termRef.current.blur())}},{key:"render",value:function(){var e,n=this.props,o=n.actionUrl,r=n.intl,a=n.role,c=n.ariaExpanded,i=n.ariaControls,l=this.state,s=l.focused,d=l.dirty,h=l.term,p=l.productContext,f=t.hasProductContext(p);return T("form",{className:m()(_.a.form,(B(e={},_.a.focused,s),B(e,_.a.dirty,d),B(e,_.a.hasProductContext,f),e)),action:o,role:"search",onSubmit:this.handleSubmit},void 0,f&&T("div",{className:_.a.contextWrapper},void 0,u.a.createElement(w.a,{label:p.label,accessibleLabel:r.formatMessage(D.clearSearchProductContextAccessibleLabel),onClick:this.handleContextClick,onKeyDown:this.handleContextKeyDown,onKeyUp:this.handleContextKeyUp,ref:this.contextRef,invert:!0})),T("div",{className:_.a.termWrapper},void 0,u.a.createElement("input",{className:_.a.term,type:"search",placeholder:r.formatMessage(D.searchTermPlaceholder),name:"query",autoComplete:"off","aria-label":r.formatMessage(D.searchTermLabel),value:h,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,ref:this.termRef,role:a,"aria-expanded":c,"aria-controls":i})),u.a.createElement("button",{className:_.a.clear,"aria-label":r.formatMessage(D.clearSearchTermLabel),type:"button",onClick:this.handleClearClick,ref:this.clearRef},R),u.a.createElement("button",{className:_.a.search,type:"submit","aria-label":r.formatMessage(D.searchTermLabel),onClick:this.handleSearchClick,ref:this.searchRef},N))}}])&&F(n.prototype,o),r&&F(n,r),t}();U.propTypes={intl:p.g.isRequired,actionUrl:h.a.string,term:h.a.string,productContext:h.a.shape({id:h.a.string,label:h.a.string}),onSearch:h.a.func,onChange:h.a.func,onFocus:h.a.func,onBlur:h.a.func,onKeyDown:h.a.func,focus:h.a.bool,role:h.a.string,ariaExpanded:h.a.bool,ariaControls:h.a.string,onClearProductContext:h.a.func},U.defaultProps={actionUrl:"",term:"",productContext:null,onSearch:function(){},onChange:function(){},onFocus:function(){},onBlur:function(){},onKeyDown:function(){},focus:!1,role:null,ariaExpanded:!1,ariaControls:"",onClearProductContext:function(){}};var K,A=U,L=n(19),W=n.n(L)()({loader:function(){return n.e(15).then(n.bind(null,1931))},modules:["./Typeahead"],webpack:function(){return[1931]},loading:function(){return null}}),M=n(1767),q=n.n(M);function $(e){return($="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t,n,o){K||(K="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var r=e&&e.defaultProps,a=arguments.length-3;if(t||0===a||(t={children:void 0}),t&&r)for(var c in r)void 0===t[c]&&(t[c]=r[c]);else t||(t=r||{});if(1===a)t.children=o;else if(a>1){for(var i=new Array(a),l=0;l<a;l++)i[l]=arguments[l+3];t.children=i}return{$$typeof:K,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=38,X=40,Y=13,ee=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=V(t).call(this,e))||"object"!==$(r)&&"function"!==typeof r?Z(o):r).state={isInputChanged:!1,isFocused:!1,hasFocused:!1,triggerFocus:!1,selectedTerm:e.term,productContext:e.productContext,prevSelectedTerm:e.term,prevProductContext:e.productContext},n.selectCompletion=n.selectCompletion.bind(Z(n)),n.handleOnInputChange=n.handleOnInputChange.bind(Z(n)),n.handleInputOnFocus=n.handleInputOnFocus.bind(Z(n)),n.handleInputOnBlur=n.handleInputOnBlur.bind(Z(n)),n.handleInputOnKeyDown=n.handleInputOnKeyDown.bind(Z(n)),n.handleFormOnSubmit=n.handleFormOnSubmit.bind(Z(n)),n.handleCompletionSelection=n.handleCompletionSelection.bind(Z(n)),n.handleCompletionOnKeyDown=n.handleCompletionOnKeyDown.bind(Z(n)),n.handleCompletionOnFocus=n.handleCompletionOnFocus.bind(Z(n)),n.handleOnMenuOpened=n.handleOnMenuOpened.bind(Z(n)),n.handleClearProductContext=n.handleClearProductContext.bind(Z(n)),n.handleRef=n.handleRef.bind(Z(n)),n.selectedCompletionIndex=0,n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,s["Component"]),n=t,r=[{key:"getDerivedStateFromProps",value:function(e,t){if(!t)return null;var n=e.term!==t.prevSelectedTerm,o=b()(e,"productContext.id",null)!==b()(t,"prevProductContext.id",null),r={},a={},c=null;return n&&(r={selectedTerm:e.term,prevSelectedTerm:e.term}),o&&(a={productContext:e.productContext,prevProductContext:e.productContext}),(o||n)&&(c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){J(e,t,n[t])})}return e}({},t,r,a)),c}}],(o=[{key:"selectCompletion",value:function(e,t){var n=this.props,o=n.updateTerm,r=n.clearCompletions,a=n.handleSubmit,c=n.handleEvent,i=this.state.productContext;o(t),r(),a(t,i),c(function(e,t){return{name:"completionSelected",newTerm:e,currentTerm:t}}(t,e)),c({name:"searched"})}},{key:"handleOnInputChange",value:function(e){var t=this.props,n=t.updateTerm,o=t.fetchCompletions,r=t.handleEvent;this.state.isFocused&&(this.setState({isInputChanged:!0}),n(e),o(e),r({name:"changed"}))}},{key:"handleInputOnFocus",value:function(){var e=this.props,t=e.term,n=e.handleEvent;this.setState({selectedTerm:t,isFocused:!0,hasFocused:!0}),n({name:"focused"})}},{key:"handleInputOnBlur",value:function(){var e=this.props.handleEvent;this.setState({isInputChanged:!1,isFocused:!1,triggerFocus:!1}),e({name:"blurred"})}},{key:"handleInputOnKeyDown",value:function(e){var t=e.keyCode,n=this.completionsList;if(n&&n.childNodes.length&&n.childNodes[0].childNodes.length)switch(t){case X:e.preventDefault(),this.selectedCompletionIndex=0,n.childNodes[0].getElementsByTagName("a")[0].focus();break;case Q:e.preventDefault(),this.selectedCompletionIndex=n.childNodes.length-1,n.childNodes[this.selectedCompletionIndex].getElementsByTagName("a")[0].focus()}}},{key:"handleCompletionOnKeyDown",value:function(e){var t=e.keyCode,n=this.props.term,o=this.state.selectedTerm,r=this.completionsList,a=this.completionsList.childNodes;if(r&&a.length&&a[0].childNodes.length)switch(t){case X:e.preventDefault(),this.selectedCompletionIndex===a.length-1?(this.selectedCompletionIndex=0,this.setState({triggerFocus:!0})):(this.setState({triggerFocus:!1}),this.selectedCompletionIndex=this.selectedCompletionIndex+1,a[this.selectedCompletionIndex]&&a[this.selectedCompletionIndex].getElementsByTagName("a")[0].focus());break;case Q:e.preventDefault(),0===this.selectedCompletionIndex?(this.selectedCompletionIndex=0,this.setState({triggerFocus:!0})):(this.setState({triggerFocus:!1}),this.selectedCompletionIndex=this.selectedCompletionIndex-1,a[this.selectedCompletionIndex]&&a[this.selectedCompletionIndex].getElementsByTagName("a")[0].focus());break;case Y:this.selectCompletion(n,o)}else this.setState({triggerFocus:!0})}},{key:"handleFormOnSubmit",value:function(e){var t=e.term,n=this.props,o=n.handleSubmit,r=n.handleEvent,a=n.clearCompletions;o(t,this.state.productContext),a(),r({name:"searched"})}},{key:"handleCompletionSelection",value:function(e,t){var n=this.props.term;e.preventDefault(),this.selectCompletion(n,t)}},{key:"handleCompletionOnFocus",value:function(e){this.setState({selectedTerm:e})}},{key:"handleClickOutside",value:function(){(0,this.props.clearCompletions)()}},{key:"handleOnMenuOpened",value:function(){var e=this.props,t=e.clearCompletions,n=e.onSearchBoxFocus;t(),n()}},{key:"handleClearProductContext",value:function(){this.setState({productContext:null})}},{key:"handleRef",value:function(e){this.completionsList=e,this.props.handleScrollableRef(this.completionsList)}},{key:"componentWillUpdate",value:function(e){var t=e.completions,n=e.handleEvent;t.length>0&&!t[0].termWithSelfSearchCompletionPrefix&&n({name:"completionsShown"})}},{key:"render",value:function(){var e,t=this.props,n=t.completions,o=t.intl,r=t.term,a=t.baseUrl,c=t.startSearchText,i=t.isOpen,l=this.state,s=l.selectedTerm,u=l.isInputChanged,d=l.isFocused,h=l.hasFocused,p=l.triggerFocus,f=l.productContext,y=m()(q.a.searchBox,(J(e={},q.a.hasValue,!!s),J(e,q.a.isFocused,d),e)),b=Array.isArray(n)&&n.length;return z("div",{className:y},void 0,z("div",{className:q.a.inputWrapper},void 0,z(A,{intl:o,actionUrl:Object(g.a)("",a),term:s,productContext:f,focus:p,onSearch:this.handleFormOnSubmit,onChange:this.handleOnInputChange,onFocus:this.handleInputOnFocus,onBlur:this.handleInputOnBlur,onKeyDown:this.handleInputOnKeyDown,role:b?"combobox":null,ariaExpanded:!!b,ariaControls:"searchBox",onClearProductContext:this.handleClearProductContext})),h&&z(W,{completions:n,baseUrl:a,term:r,handleRef:this.handleRef,handleCompletionSelection:this.handleCompletionSelection,handleCompletionOnKeyDown:this.handleCompletionOnKeyDown,handleCompletionOnFocus:this.handleCompletionOnFocus,isOpen:i,startSearchText:c,isInputChanged:u,selectedTerm:s,productContext:f,onClearProductContext:this.handleClearProductContext}))}}])&&G(n.prototype,o),r&&G(n,r),t}();ee.propTypes={intl:p.g.isRequired,term:h.a.string,baseUrl:h.a.string,startSearchText:h.a.string,completions:h.a.arrayOf(h.a.shape({type:h.a.string})),handleSubmit:h.a.func,handleEvent:h.a.func,fetchCompletions:h.a.func,clearCompletions:h.a.func,updateTerm:h.a.func,onSearchBoxFocus:h.a.func,isOpen:h.a.bool,productContext:h.a.shape({id:h.a.string,label:h.a.string})},ee.defaultProps={term:"",baseUrl:"",startSearchText:"",completions:[],handleSubmit:function(){},handleEvent:function(){},fetchCompletions:function(){},clearCompletions:function(){},updateTerm:function(){},onSearchBoxFocus:function(){},isOpen:!1,productContext:null},ee.displayName="SearchBox";t.default=C()(ee)},1948:function(e,t,n){"use strict";n.r(t);var o,r,a,c=n(1),i=n.n(c),l=n(0),s=n.n(l),u=n(5),d=n(38),h=n(42),p=function(){return{category:"Search",action:"typeahead-shown"}},f=function(e,t){return{category:"Search",action:"typeahead-selected",label:"".concat(e,":").concat(t)}},m=n(887),y={production:{typeaheadServiceBaseUrl:"https://rb-typeahead.appspot.com/term/"},staging:{typeaheadServiceBaseUrl:"https://rb-typeahead.appspot.com/term/"},development:{typeaheadServiceBaseUrl:"https://rb-typeahead.appspot.com/term/"}};function b(e){return(b="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=Object(u.e)({selfSearchCompletionPrefix:(o={id:"node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.selfSearchCompletionPrefix"},x(o,"id","node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.selfSearchCompletionPrefix"),x(o,"defaultMessage","See results for {term}"),o),cancel:(r={id:"node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.cancel"},x(r,"id","node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.cancel"),x(r,"defaultMessage","Cancel"),r),startSearch:(a={id:"node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.startSearch"},x(a,"id","node_modules.@redbubble.design-system.react.headerAndFooter.containers.react.withSearch.WithSearch.startSearch"),x(a,"defaultMessage","Start typing to search and find your thing."),a)}),w=function(e){var t="production";return Object.keys(y[t]||{}).length?y[t][e]:void 0}("typeaheadServiceBaseUrl")||"",k=function(e){function t(e){var n,o,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(n=!(r=C(t).call(this,e))||"object"!==b(r)&&"function"!==typeof r?g(o):r).state={completions:[],term:e.term},n.currentUrl="",n.firedchangedEvent=!1,n.firedFocusedEvent=!1,n.firedCompletionsShownEvent=!1,n.isTermChangedSinceLastSearch=!1,n.warmUpTypeaheadServiceConnection=n.warmUpTypeaheadServiceConnection.bind(g(n)),n.doSearch=n.doSearch.bind(g(n)),n.handleEvent=n.handleEvent.bind(g(n)),n.getCompletions=n.getCompletions.bind(g(n)),n.clearCompletions=n.clearCompletions.bind(g(n)),n.fetchCompletions=n.fetchCompletions.bind(g(n)),n.updateTerm=n.updateTerm.bind(g(n)),n}var n,o,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,c["Component"]),n=t,(o=[{key:"warmUpTypeaheadServiceConnection",value:function(){this.getCompletions("typeahead-warmup",!0)}},{key:"updateTerm",value:function(e){this.setState({term:e})}},{key:"doSearch",value:function(e,t){Object(m.b)(e,t,this.props.baseUrl,this.props.doSearch),this.props.searched(),this.isTermChangedSinceLastSearch=!1,this.state.term!==e&&this.updateTerm(e)}},{key:"handleEvent",value:function(e){switch(e.name){case"changed":this.firedchangedEvent||(this.firedchangedEvent=!0);break;case"focused":this.props.onSearchBoxFocus(),this.firedFocusedEvent||(this.firedFocusedEvent=!0);break;case"completionsShown":this.firedCompletionsShownEvent||(this.props.logEvent(p()),this.firedCompletionsShownEvent=!0);break;case"completionSelected":this.props.logEvent(f(e.newTerm,e.currentTerm))}}},{key:"getCompletions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.props.intl;""!==w&&fetch("".concat(w).concat(function(e){return encodeURIComponent(e)}(e))).then(function(e){return e.json()}).then(function(r){var a=(r.completions?r.completions.slice(0,10):[]).filter(function(t){return t!==e}).map(function(e){return{value:e}});a.push({value:e,termWithSelfSearchCompletionPrefix:o.formatMessage(O.selfSearchCompletionPrefix,{term:e})}),!n&&t.isTermChangedSinceLastSearch&&t.setState({completions:a})})}},{key:"clearCompletions",value:function(){this.setState({completions:[]})}},{key:"fetchCompletions",value:function(e){this.isTermChangedSinceLastSearch=!0,e!==this.state.term&&""!==e&&this.getCompletions(e),""===e&&this.clearCompletions()}},{key:"componentWillReceiveProps",value:function(e){window.location.href!==this.currentUrl&&(this.currentUrl=window.location.href,this.warmUpTypeaheadServiceConnection()),e.term!==this.props.term&&this.setState({term:e.term})}},{key:"componentDidMount",value:function(){"undefined"!==typeof window&&(this.currentUrl=window.location.href),this.warmUpTypeaheadServiceConnection()}},{key:"render",value:function(){var e=this,t=this.props,n=t.intl,o=t.className,r=this.state,a=r.completions,c=r.term;return i.a.Children.map(this.props.children,function(t){return i.a.cloneElement(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){x(e,t,n[t])})}return e}({className:o,handleSubmit:e.doSearch,handleEvent:e.handleEvent,fetchCompletions:e.fetchCompletions,clearCompletions:e.clearCompletions,handleAbort:e.handleAbort,startSearchText:n.formatMessage(O.startSearch),completions:a,updateTerm:e.updateTerm},e.props,{term:c}))})}}])&&v(n.prototype,o),r&&v(n,r),t}();k.propTypes={intl:s.a.shape({formatMessage:s.a.func.isRequired}).isRequired,className:s.a.string,searched:s.a.func,doSearch:s.a.func,logEvent:s.a.func,term:s.a.string,onSearchBoxFocus:s.a.func,children:s.a.node.isRequired,baseUrl:s.a.string},k.defaultProps={className:"",searched:function(){},doSearch:function(){},logEvent:function(){},term:"",onSearchBoxFocus:function(){},baseUrl:""},k.displayName="WithSearch";t.default=Object(d.d)(h.withAnalytics)(k)},857:function(e,t,n){"use strict";var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=n(858),c=n(1),i=n(51);e.exports=function(e){var t=e.displayName||e.name,n=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.handleClickOutside=t.handleClickOutside.bind(t),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,c.Component),r(n,[{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleClickOutside,!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutside,!0)}},{key:"handleClickOutside",value:function(e){var t=this.__domNode;t&&t.contains(e.target)||!this.__wrappedInstance||"function"!==typeof this.__wrappedInstance.handleClickOutside||this.__wrappedInstance.handleClickOutside(e)}},{key:"render",value:function(){var t=this,n=this.props,r=n.wrappedRef,a=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(n,["wrappedRef"]);return c.createElement(e,o({},a,{ref:function(e){t.__wrappedInstance=e,t.__domNode=i.findDOMNode(e),r&&r(e)}}))}}]),n}();return n.displayName="clickOutside("+t+")",a(n,e)}},858:function(e,t,n){"use strict";var o={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a=Object.defineProperty,c=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,s=Object.getPrototypeOf,u=s&&s(Object);e.exports=function e(t,n,d){if("string"!==typeof n){if(u){var h=s(n);h&&h!==u&&e(t,h,d)}var p=c(n);i&&(p=p.concat(i(n)));for(var f=0;f<p.length;++f){var m=p[f];if(!o[m]&&!r[m]&&(!d||!d[m])){var y=l(n,m);try{a(t,m,y)}catch(b){}}}return t}return t}},887:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return c});var o=n(33),r=n.n(o);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);o=!0);}catch(l){r=!0,a=l}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=Object.entries(n).filter(function(e){return a(e,2)[1]}).map(function(e){var t=a(e,2),n=t[0],o=t[1];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(o))}).join("&");return"".concat(t,"/shop/").concat(function(e){return encodeURIComponent(e.replace(/[.\s]+/g," ").trim()).replace(/%20/g,"+")}(e)).concat(o&&"?".concat(o))},i=function(e,t,n,o){"function"===typeof o?o(e,t):window.location=c(e,n,{iaCode:r()(t,"id",null),ref:"search_box"})}},930:function(e,t,n){"use strict";var o,r=n(1),a=n.n(r),c=n(9),i=n.n(c),l=n(11),s=n(118),u=n(3),d=n(1765),h=n.n(d);function p(e,t,n,r){o||(o="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var a=e&&e.defaultProps,c=arguments.length-3;if(t||0===c||(t={children:void 0}),t&&a)for(var i in a)void 0===t[i]&&(t[i]=a[i]);else t||(t=a||{});if(1===c)t.children=r;else if(c>1){for(var l=new Array(c),s=0;s<c;s++)l[s]=arguments[s+3];t.children=l}return{$$typeof:o,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}var f=p(s.a,{size:u.v}),m=Object(r.forwardRef)(function(e,t){var n,o,r,c=e.label,s=e.accessibleLabel,u=e.onClick,d=e.onKeyDown,m=e.onKeyUp,y=e.invert;return a.a.createElement("button",{className:i()(h.a.context,(n={},o=h.a.invert,r=y,o in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n)),"aria-label":s,type:"button",onClick:u,onKeyDown:d,onKeyUp:m,ref:t},p(l.b,{type:"display6",block:!0,className:h.a.contextName},void 0,c),p("div",{className:h.a.clearIconWrapper},void 0,f))});t.a=m}}]);
//# sourceMappingURL=design-system-header-search-87b31314c53015c58c5d.js.map